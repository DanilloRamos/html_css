<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Requisições HTTP no React</title>
</head>
<body>
    <h1>Requisições HTTP no React</h1>    
    <h2>JSON Server</h2>
    <ul>
        <li>JSON Server é um pacote npm</li>
        <li>Simula uma API, permitindo fazer requisições HTTP</li>
        <li>Não necessita de um back-end</li>
    </ul>

    <h2>Importância do useEffect</h2>
    <ul>
        <li>Faz com que seja possível controlar uma ação</li>
        <li>O componente é re-renderizado a cada mudança</li>
        <li>useEffect possui um array de dependências que coordena, o que permite a execução do código</li>
        <li>Muito comum nas requisições HTTP<li>
    </ul>

    <h2>Resgatando dados com React</h2>
    <ul>
        <li>useState é usado para salvar os dados</li>
        <li>useEffect chama a API apenas quando necessário</li>
        <li>Axios ou Fetch API para realizar a requisição dos dados</li>
    </ul>

    <h2>Adicionando dados</h2>
    <ul>
        <li>Inputs preenchem os useStates</li>
        <li>Os dados são reunidos em uma função, disparada no evento onSubmit</li>
        <li>Verbo HTTP: Post</li>
        <li>Processo é parecido com o resgate de dados</li>
    </ul>

    <h2>Carregamento dinâmico</h2>
    <ul>
        <li>Se a requisição obter êxito, um novo item é adicionado ao front da lista<li>
        <li>Não é preciso fazer outra requisição HTTP</li>
    </ul>

    <h2>Custom hook para o fetch</h2>
    <ul>
        <li>É normal separar as responsabilidades nos componentes</li>
        <li>Pode-se criar o próprio hook para isso, chamado de custom hook</li>
        <li>São guardados na pasta hooks</li>
    </ul>

    <h2>Refatorando o POST</h2>
    <ul>
        <li>É possível reutilizar o hook para fazer o POST</li>
        <li>Um useEffect é criado para mapear uma outra mudança de estilo</li>
        <li>Nem sempre reutilizar um hook para várias ações é a melhor estratégia</li>
    </ul>

    <h2>Estado de loading</h2>
    <ul>
        <li>É normal que a resposta demore um pouco a chegar</li>
        <li>Nesse intervalo, será inserido um elemento de loading</li>
        <li>É possível inserir um hook nessa abordagem</li>
    </ul>

    <h2>Loading no POST</h2>
    <ul>
        <li>Ações podem ser bloqueadas enquanto a requisição ocorre</li>
        <li>Evita a duplicação de eventos</li>
        <li>Um POST ocorrendo pode ser identificado, então o evento de envio da informação é bloqueado</li>
    </ul>

    <h2>Tratando erros</h2>
    <ul>
        <li>Erros são tratados com blocos try catch</li>
        <li>É possível pegar os dados do erro e exibir na tela</li>
        <li>É possível prever erros em todos os cenários</li>
    </ul>
</body>
</html>